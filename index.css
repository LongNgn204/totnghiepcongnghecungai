@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS VARIABLES - Theme Colors
   ============================================ */
@layer base {
  :root {
    /* Light Mode - New Palette */
    --color-background: 255 255 255;      /* White */
    --color-surface: 249 250 251;         /* Gray 50 */
    --color-surface-hover: 243 244 246;   /* Gray 100 */
    --color-border: 229 231 235;          /* Gray 200 */
    --color-text-primary: 12 12 13;       /* Custom Dark Gray */
    --color-text-secondary: 80 82 85;     /* Custom Medium Gray */
    --color-text-tertiary: 107 114 128;    /* Gray 500 */
    --color-text-inverse: 255 255 255;     /* White */
  }

  .dark {
    /* Dark Mode - New Palette */
    --color-background: 18 18 18;         /* Custom Near Black */
    --color-surface: 28 28 30;            /* Custom Dark Surface */
    --color-surface-hover: 44 44 46;      /* Custom Dark Hover */
    --color-border: 55 65 81;             /* Gray 700 */
    --color-text-primary: 244 244 245;    /* Custom Off-white (Zinc 100) */
    --color-text-secondary: 160 163 167;  /* Custom Light Gray */
    --color-text-tertiary: 156 163 175;   /* Gray 400 */
    --color-text-inverse: 18 18 18;       /* Custom Near Black */
  }

  html {
    @apply h-full scroll-smooth;
  }

  body {
    @apply h-full antialiased bg-background text-text-primary;
    @apply selection:bg-primary-200 selection:text-primary-900;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Scrollbar Styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-background;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-neutral-300 hover:bg-primary-500 rounded-full transition-colors duration-200;
  }

  .dark ::-webkit-scrollbar-thumb {
    @apply bg-neutral-600 hover:bg-primary-500;
  }

  /* Firefox Scrollbar */
  /* Scrollbar colors using CSS variables for compatibility */
  :root {
    --color-scrollbar-thumb: 209 213 219; /* neutral-300 */
  }
  .dark {
    --color-scrollbar-thumb: 75 85 99; /* neutral-600 */
  }
  * {
    scrollbar-color: rgb(var(--color-scrollbar-thumb)) rgb(var(--color-background));
    scrollbar-width: thin;
  }
}

/* ============================================
   BASE TYPOGRAPHY
   ============================================ */
@layer base {
  h1 {
    @apply text-h1 font-bold text-text-primary;
  }

  h2 {
    @apply text-h2 font-bold text-text-primary;
  }

  h3 {
    @apply text-h3 font-semibold text-text-primary;
  }

  h4 {
    @apply text-h4 font-semibold text-text-primary;
  }

  h5 {
    @apply text-h5 font-semibold text-text-primary;
  }

  h6 {
    @apply text-h6 font-semibold text-text-primary;
  }

  p {
    @apply text-body text-text-secondary;
  }

  a {
    @apply text-primary-600 hover:text-primary-700 transition-colors duration-200;
  }

  code {
    @apply font-mono text-body-sm bg-neutral-100 dark:bg-neutral-800 px-2 py-1 rounded-md;
  }

  pre {
    @apply bg-neutral-900 dark:bg-neutral-950 text-neutral-100 p-4 rounded-lg overflow-x-auto;
  }
}

/* ============================================
   COMPONENT UTILITIES
   ============================================ */
@layer components {
  /* Button Variants */
  .btn-primary {
    @apply inline-flex items-center justify-center px-lg py-md rounded-lg;
    @apply bg-primary-600 text-white font-semibold;
    @apply hover:bg-primary-700 active:bg-primary-800;
    @apply transition-colors duration-200 cursor-pointer;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply shadow-sm hover:shadow-md;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-lg py-md rounded-lg;
    @apply bg-neutral-200 dark:bg-neutral-700 text-text-primary;
    @apply hover:bg-neutral-300 dark:hover:bg-neutral-600;
    @apply transition-colors duration-200 cursor-pointer;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply font-semibold;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center px-lg py-md rounded-lg;
    @apply text-text-primary hover:bg-neutral-100 dark:hover:bg-neutral-800;
    @apply transition-colors duration-200 cursor-pointer;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply font-semibold;
  }

  .btn-icon {
    @apply inline-flex items-center justify-center p-md rounded-lg;
    @apply text-text-secondary hover:text-primary-600;
    @apply hover:bg-neutral-100 dark:hover:bg-neutral-800;
    @apply transition-colors duration-200 cursor-pointer;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-icon-sm {
    @apply inline-flex items-center justify-center p-xs rounded-md;
    @apply text-text-secondary hover:text-primary-600;
    @apply hover:bg-neutral-100 dark:hover:bg-neutral-800;
    @apply transition-colors duration-200 cursor-pointer;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Card Component */
  .card {
    @apply bg-surface rounded-xl shadow-sm p-lg;
    @apply border border-border transition-all duration-200;
    @apply hover:shadow-md hover:border-primary-200 dark:hover:border-primary-800;
  }

  .card-interactive {
    @apply card cursor-pointer;
    @apply hover:shadow-lg hover:-translate-y-0.5;
  }

  /* Badge Component */
  .badge {
    @apply inline-flex items-center px-md py-xs rounded-full;
    @apply text-label font-semibold;
    @apply bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300;
  }

  .badge-success {
    @apply bg-accent-green-100 dark:bg-accent-green-900 text-accent-green-700 dark:text-accent-green-300;
  }

  .badge-warning {
    @apply bg-accent-yellow-100 dark:bg-accent-yellow-900 text-accent-yellow-700 dark:text-accent-yellow-300;
  }

  .badge-error {
    @apply bg-accent-red-100 dark:bg-accent-red-900 text-accent-red-700 dark:text-accent-red-300;
  }

  .badge-info {
    @apply bg-accent-blue-100 dark:bg-accent-blue-900 text-accent-blue-700 dark:text-accent-blue-300;
  }

  /* Input Component */
  .input {
    @apply w-full px-lg py-md rounded-lg;
    @apply bg-surface border border-border;
    @apply text-text-primary placeholder:text-text-tertiary;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
    @apply transition-all duration-200;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Form Field */
  .form-field {
    @apply flex flex-col gap-md;
  }

  .form-label {
    @apply text-label font-semibold text-text-primary;
  }

  .form-hint {
    @apply text-caption text-text-tertiary;
  }

  .form-error {
    @apply text-caption text-accent-red-600 dark:text-accent-red-400;
  }

  /* Divider */
  .divider {
    @apply h-px bg-border;
  }

  .divider-vertical {
    @apply w-px h-full bg-border;
  }

  /* Text Utilities */
  .text-truncate {
    @apply truncate;
  }

  .text-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .text-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Flex Utilities */
  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-between {
    @apply flex items-center justify-between;
  }

  .flex-col-center {
    @apply flex flex-col items-center justify-center;
  }

  /* Grid Utilities */
  .grid-auto {
    @apply grid auto-cols-max gap-lg;
  }

  /* Responsive Container */
  .container-responsive {
    @apply w-full max-w-7xl mx-auto px-lg;
  }

  /* Overlay */
  .overlay {
    @apply fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm;
  }

  /* Skeleton Loading */
  .skeleton {
    @apply bg-neutral-200 dark:bg-neutral-700 rounded-lg animate-pulse;
  }

  .skeleton-text {
    @apply h-4 bg-neutral-200 dark:bg-neutral-700 rounded animate-pulse;
  }

  .skeleton-circle {
    @apply w-12 h-12 bg-neutral-200 dark:bg-neutral-700 rounded-full animate-pulse;
  }
}

/* ============================================
   ANIMATIONS
   ============================================ */
@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }

  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }

  .animate-slide-left {
    animation: slideLeft 0.3s ease-out;
  }

  .animate-slide-right {
    animation: slideRight 0.3s ease-out;
  }

  .animate-scale-in {
    animation: scaleIn 0.3s ease-out;
  }

  .animate-bounce-subtle {
    animation: bounceSubtle 0.6s ease-in-out infinite;
  }

  .animate-pulse-subtle {
    animation: pulseSubtle 2s ease-in-out infinite;
  }

  /* Hover Effects */
  .hover-lift {
    @apply transition-all duration-200 hover:-translate-y-1 hover:shadow-lg;
  }

  .hover-scale {
    @apply transition-transform duration-200 hover:scale-105;
  }

  .hover-glow {
    @apply transition-all duration-200 hover:shadow-orange-glow;
  }

  /* Focus Visible */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 dark:focus-visible:ring-offset-neutral-950;
  }

  /* Transition Utilities */
  .transition-fast {
    @apply transition-all duration-150;
  }

  .transition-base {
    @apply transition-all duration-200;
  }

  .transition-slow {
    @apply transition-all duration-300;
  }

  .transition-slower {
    @apply transition-all duration-500;
  }

  /* Gradient Utilities */
  .gradient-primary {
    @apply bg-gradient-to-r from-primary-600 to-primary-400;
  }

  .gradient-primary-dark {
    @apply bg-gradient-to-r from-primary-700 to-primary-500;
  }

  .gradient-accent {
    @apply bg-gradient-to-r from-accent-blue-600 to-accent-purple-600;
  }

  .gradient-success {
    @apply bg-gradient-to-r from-accent-green-600 to-accent-cyan-600;
  }


}

/* ============================================
   DARK MODE SPECIFIC STYLES
   ============================================ */
@layer base {
  .dark {
    color-scheme: dark;
  }

  .dark a {
    @apply text-primary-400 hover:text-primary-300;
  }

  .dark code {
    @apply bg-neutral-800 text-neutral-100;
  }

  .dark pre {
    @apply bg-neutral-950 text-neutral-100;
  }
}

/* ============================================
   UTILITY CLASSES FOR COMMON PATTERNS
   ============================================ */
@layer utilities {
  /* Truncate with ellipsis */
  .truncate-line {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  /* Aspect Ratios */
  .aspect-square {
    @apply aspect-square;
  }

  .aspect-video {
    @apply aspect-video;
  }

  /* Positioning */
  .absolute-center {
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
  }

  .absolute-center-x {
    @apply absolute left-1/2 -translate-x-1/2;
  }

  .absolute-center-y {
    @apply absolute top-1/2 -translate-y-1/2;
  }

  /* Visibility */
  .visually-hidden {
    @apply sr-only;
  }

  /* Print Utilities */
  @media print {
    .no-print {
      @apply hidden;
    }
  }
}

/* ============================================
   RESPONSIVE UTILITIES
   ============================================ */
@layer utilities {
  /* Hide on mobile, show on desktop */
  .hidden-mobile {
    @apply md:block hidden;
  }

  .visible-mobile {
    @apply md:hidden;
  }

  /* Container Queries */
  @supports (container-type: inline-size) {
    .container-query {
      container-type: inline-size;
    }
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */
@layer utilities {
  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* High Contrast Mode */
  @media (prefers-contrast: more) {
    .btn-primary {
      @apply border-2 border-primary-900;
    }

    .card {
      @apply border-2 border-text-primary;
    }
  }
}

/* ============================================
   CUSTOM PROSE STYLES
   ============================================ */
@layer base {
  .prose-custom {
    --tw-prose-body: theme(colors.text.secondary);
    --tw-prose-headings: theme(colors.text.primary);
    --tw-prose-links: theme(colors.primary.DEFAULT);
    --tw-prose-bold: theme(colors.text.primary);
    --tw-prose-counters: theme(colors.text.tertiary);
    --tw-prose-bullets: theme(colors.text.tertiary);
    --tw-prose-hr: theme(colors.border);
    --tw-prose-quotes: theme(colors.text.primary);
    --tw-prose-quote-borders: theme(colors.primary.200);
    --tw-prose-captions: theme(colors.text.tertiary);
    --tw-prose-code: theme(colors.text.primary);
    --tw-prose-pre-code: theme(colors.neutral.200);
    --tw-prose-pre-bg: theme(colors.neutral.800);
    --tw-prose-th-borders: theme(colors.border);
    --tw-prose-td-borders: theme(colors.border);
  }

  .dark .prose-custom {
    --tw-prose-body: theme(colors.text.secondary);
    --tw-prose-headings: theme(colors.text.primary);
    --tw-prose-links: theme(colors.primary.400);
    --tw-prose-bold: theme(colors.text.primary);
    --tw-prose-counters: theme(colors.text.tertiary);
    --tw-prose-bullets: theme(colors.text.tertiary);
    --tw-prose-hr: theme(colors.border);
    --tw-prose-quotes: theme(colors.text.primary);
    --tw-prose-quote-borders: theme(colors.primary.800);
    --tw-prose-captions: theme(colors.text.tertiary);
    --tw-prose-code: theme(colors.text.primary);
    --tw-prose-pre-code: theme(colors.neutral.300);
    --tw-prose-pre-bg: theme(colors.neutral.900);
    --tw-prose-th-borders: theme(colors.border);
    --tw-prose-td-borders: theme(colors.border);
  }

  .prose-custom a {
    @apply transition-colors hover:text-primary-700 dark:hover:text-primary-300;
  }
}